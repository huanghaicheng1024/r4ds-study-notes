[
["index.html", "r4ds学习笔记 背景", " r4ds学习笔记 Huang 2020-08-30 背景 开始正式学习《R for data science》(https://r4ds.had.co.nz/) 2020-8-29 "],
["intro.html", "1 Introduction", " 1 Introduction 这本书主要讲解的，是如何使用非常重要的数据科学工具，并给出了工具模型 其大致的含义如下： "],
["explore-intro.html", "2 Introduction", " 2 Introduction 首先开始讲解的是数据探索这部分内容。 数据探索是一门艺术，它是审视数据、生成假设、假设检验的不断反复的过程。 "],
["data-visualisation.html", "3 Data visualisation 3.1 Introduction 3.2 First steps 3.3 Aesthetic mappings", " 3 Data visualisation 3.1 Introduction 我们将要学习的第一套工具，ggplot2的程序包，用于绘图。 首先加载tidyverse library(tidyverse) #&gt; -- Attaching packages ------------ #&gt; √ ggplot2 3.3.2 √ purrr 0.3.4 #&gt; √ tibble 3.0.3 √ dplyr 1.0.2 #&gt; √ tidyr 1.1.1 √ stringr 1.4.0 #&gt; √ readr 1.3.1 √ forcats 0.5.0 #&gt; -- Conflicts --------------------- #&gt; x dplyr::filter() masks stats::filter() #&gt; x dplyr::lag() masks stats::lag() 3.2 First steps 先绘制一个mpg数据框里边的引擎大小(displ)-燃油效率(hwy)散点图 ggplot(data = mpg)+ geom_point(mapping = aes(x = displ,y = hwy)) 可以看到，绘图的模板命令大致是 ggplot(data = &lt;DATA&gt;) + &lt;GEOM_FUNCTION&gt;(mapping = aes(&lt;MAPPINGS&gt;)) ggplot(data = &lt;DATA&gt;) 这是在生成一个空白图层，指定数据。 &lt;GEOM_FUNCTION&gt;(mapping = aes(&lt;MAPPINGS&gt;)) 这是在空白图层上方继续加图层，比如前面的geom_point就是加上散点图图层。mapping是映射，是将数据框的属性映射成图形属性，常见的我们还用aes()，这是将将数据框的属性映射成x,y轴变量。 3.2.1 Exercises 运行ggplot(data = mpg)，你会看到什么？ ggplot(data = mpg) 显然，是一个空白的图层。 数据集mpg中有多少行？多少列？ str(mpg) #&gt; tibble [234 x 11] (S3: tbl_df/tbl/data.frame) #&gt; $ manufacturer: chr [1:234] &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; ... #&gt; $ model : chr [1:234] &quot;a4&quot; &quot;a4&quot; &quot;a4&quot; &quot;a4&quot; ... #&gt; $ displ : num [1:234] 1.8 1.8 2 2 2.8 2.8 3.1 1.8 1.8 2 ... #&gt; $ year : int [1:234] 1999 1999 2008 2008 1999 1999 2008 1999 1999 2008 ... #&gt; $ cyl : int [1:234] 4 4 4 4 6 6 6 4 4 4 ... #&gt; $ trans : chr [1:234] &quot;auto(l5)&quot; &quot;manual(m5)&quot; &quot;manual(m6)&quot; &quot;auto(av)&quot; ... #&gt; $ drv : chr [1:234] &quot;f&quot; &quot;f&quot; &quot;f&quot; &quot;f&quot; ... #&gt; $ cty : int [1:234] 18 21 20 21 16 18 18 18 16 20 ... #&gt; $ hwy : int [1:234] 29 29 31 30 26 26 27 26 25 28 ... #&gt; $ fl : chr [1:234] &quot;p&quot; &quot;p&quot; &quot;p&quot; &quot;p&quot; ... #&gt; $ class : chr [1:234] &quot;compact&quot; &quot;compact&quot; &quot;compact&quot; &quot;compact&quot; ... 利用str函数，可以得到数据集mpg中有234行11列。 变量drv的意义是什么？使用?mpg命令阅读帮助文件以找出答案。 ?mpg #&gt; starting httpd help server ... done 通过阅读帮助文档可以知道 drv: the type of drive train, where f = front-wheel drive, r = rear wheel drive, 4 = 4wd 即传动系的类型，f表示前轮驱动，r表示后轮驱动，4表示四轮驱动。 使用hwy和cyl绘制一张散点图。 ggplot(data = mpg)+ geom_point(mapping = aes(x = hwy,y = cyl)) 啊，这奇怪的图形。 如果使用class和drv绘制散点图，会发生什么情况？为什么这张图没什么用处？ ggplot(data = mpg)+ geom_point(mapping = aes(x = class,y = drv)) 会出现很多点重合的现象，这是这张图没什么用处的原因吗？但是自我感觉还是保留了些许信息，但的确被压缩了很多。 3.3 Aesthetic mappings 我们在前面学习了如何把数据框属性映射为x,y轴，实际上还可以映射其他图形属性。 在引擎大小(displ)-燃油效率(hwy)散点图中增加多一个映射，将点的颜色映射为变量class ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy, color = class)) 类似于点的颜色，还有的图形属性为： 点的透明度alpha 点的大小size，单位为毫米 点的形状shape，ggplot2只能同时使用6种形状 还可以通过?geom_point来查看 除了映射图形属性让ggplot2帮忙设置，还可以手动为几何对象设置图形属性。 ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy),colour = &#39;blue&#39;) 上图会将所有点都绘制成蓝色，因为我们并没有对点的颜色建立映射，而是直接设置。这与前面的图不同。 3.3.1 Exercises 以下这段代码有什么错误？为什么点不是蓝色的？ ggplot(data = mpg) + geom_point( mapping = aes(x = displ, y = hwy, color = &quot;blue&quot;) ) 这是因为这段代码把字符串常量当作数据框属性映射为点的颜色，由于各点的值都是常量“blue”故大家的颜色也一样，为默认的第一种颜色：红色。 事实上， ggplot(data = mpg) + geom_point( mapping = aes(x = displ, y = hwy, color = &quot;hello&quot;) ) 不论那个字符串是什么，甚至不是颜色的字符串也没有什么影响的。 (2)mpg中的哪些变量是分类变量？哪些变量是连续变量？（提示：输入?mpg来阅读这个数据集的文档。）当调用mpg时，如何才能看到这些信息？ 当然可以阅读文档，但也可以 str(mpg) #&gt; tibble [234 x 11] (S3: tbl_df/tbl/data.frame) #&gt; $ manufacturer: chr [1:234] &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; ... #&gt; $ model : chr [1:234] &quot;a4&quot; &quot;a4&quot; &quot;a4&quot; &quot;a4&quot; ... #&gt; $ displ : num [1:234] 1.8 1.8 2 2 2.8 2.8 3.1 1.8 1.8 2 ... #&gt; $ year : int [1:234] 1999 1999 2008 2008 1999 1999 2008 1999 1999 2008 ... #&gt; $ cyl : int [1:234] 4 4 4 4 6 6 6 4 4 4 ... #&gt; $ trans : chr [1:234] &quot;auto(l5)&quot; &quot;manual(m5)&quot; &quot;manual(m6)&quot; &quot;auto(av)&quot; ... #&gt; $ drv : chr [1:234] &quot;f&quot; &quot;f&quot; &quot;f&quot; &quot;f&quot; ... #&gt; $ cty : int [1:234] 18 21 20 21 16 18 18 18 16 20 ... #&gt; $ hwy : int [1:234] 29 29 31 30 26 26 27 26 25 28 ... #&gt; $ fl : chr [1:234] &quot;p&quot; &quot;p&quot; &quot;p&quot; &quot;p&quot; ... #&gt; $ class : chr [1:234] &quot;compact&quot; &quot;compact&quot; &quot;compact&quot; &quot;compact&quot; ... summary(mpg) #&gt; manufacturer model displ year #&gt; Length:234 Length:234 Min. :1.60 Min. :1999 #&gt; Class :character Class :character 1st Qu.:2.40 1st Qu.:1999 #&gt; Mode :character Mode :character Median :3.30 Median :2004 #&gt; Mean :3.47 Mean :2004 #&gt; 3rd Qu.:4.60 3rd Qu.:2008 #&gt; Max. :7.00 Max. :2008 #&gt; cyl trans drv cty #&gt; Min. :4.00 Length:234 Length:234 Min. : 9.0 #&gt; 1st Qu.:4.00 Class :character Class :character 1st Qu.:14.0 #&gt; Median :6.00 Mode :character Mode :character Median :17.0 #&gt; Mean :5.89 Mean :16.9 #&gt; 3rd Qu.:8.00 3rd Qu.:19.0 #&gt; Max. :8.00 Max. :35.0 #&gt; hwy fl class #&gt; Min. :12.0 Length:234 Length:234 #&gt; 1st Qu.:18.0 Class :character Class :character #&gt; Median :24.0 Mode :character Mode :character #&gt; Mean :23.4 #&gt; 3rd Qu.:27.0 #&gt; Max. :44.0 将一个连续变量映射为color、size和shape。对分类变量和连续变量来说，这些图形 属性的表现有什么不同？ 实践是检验真理的唯一标准，我们试试看： ggplot(data = mpg) + geom_point( mapping = aes(x = displ, y = hwy, color = cty) ) ggplot(data = mpg) + geom_point( mapping = aes(x = displ, y = hwy, size = cty) ) ggplot(data = mpg) + geom_point( mapping = aes(x = displ, y = hwy, shape = cty) ) 前两个还好，后面这个形状是直接报错无法映射了。毕竟color还有size都是可以渐变也即可以建立连续映射到连续的，但是形状就是铁定的离散值了，无法与连续值建立映射。 (4)如果将同一个变量映射为多个图形属性，会发生什么情况？ 试试看： ggplot(data = mpg) + geom_point( mapping = aes(x = displ, y = hwy, colour = class, size = class) ) #&gt; Warning: Using size for a discrete variable is not advised. 咦，会叠加的耶。 (5)stroke这个图形属性的作用是什么？它适用于哪些形状？（提示：使用?geom_point命令。） ?geom_point #&gt; starting httpd help server ... done 但是里面没有具体涉及。实践一下 ggplot(data = mpg) + geom_point( mapping = aes(x = displ, y = hwy, stroke = cty*0.2, size = cty) ) 查阅https://ggplot2.tidyverse.org/articles/ggplot2-specs.html#colour-and-fill-1， stroke这个图形属性是用于21-24形状的点的描边大小。 如果将图形属性映射为非变量名对象，比如aes(color = displ &lt; 5)，会发生什么情况？ ggplot(data = mpg) + geom_point( mapping = aes(x = displ, y = hwy, color = displ &lt; 5) ) 嗯，还是可以映射成图形属性的。 "]
]
